# FreeRTOS Ver10.0.0 DemoProject for Renesas RX65N (CS+ CC-RX)

　このデモはFreeRTOSv10.0.0をRenesas RX65Nマイコン用に移植したものです。
素人の自分が個人利用目的で作成したものですのでこれに関する一切の責任を取りません。

文字コードは __UTF-8__ を使用しています。

## 動作環境
FreeRTOS:v10.0.0 (RX600 RXv2)  
開発環境：CS+forCC V6.01.00  
コンパイラ：CC-RX V2.08.00 (C99)  
CPUボード：TARGET BOARD for RX65N (RTK5RX65N0C00000BR)  
CPU：R5F565NEDDFP (100-pin LFQFP,120MHz,RAM 640KB,ROM 2MB+32KB)

## サンプルコード内容
CPUボード上のLED0(PD6)を1Hz、LED1(PD7)を5Hzで点滅させる2つのタスクを動かします。

　クロック発生回路とポート初期化をスマートコンフィグレータで設定しています。 
FreeRTOSではカーネルタイマにCMT0,システムコールにソフトウェア割込み(SWINT)を使用しているので、その機能は使用しないでください。

## ファイル構成
自力でプロジェクトを作るためのメモ。`main.c`と`ApplicationHook.c`は自分が用意しています。

  1. FreeRTOSフォルダ以下をそのままプロジェクトフォルダにコピーしてプロジェクトに登録。
  1. `ApplicationHook.c`のフック関数類はユーザー側で定義しないとビルド通らないので、取りあえずこれもコピーしてプロジェクトに登録。必要に応じて自力で関数を追加すること。
  1. main.cにある`vApplicationSetupTimerInterrupt()`も必ず必要なので適当にどこかに定義する。
  1. `/FreeRTOS/FreeRTOSConfig.h`を目的に合わせて設定する。

## 注意点
* ソースコードの文字エンコードに __UTF-8__ を使用するため、ビルド設定をShift-JISからUTF-8に変更してあります。
* FreeRTOSのメモリ管理ファイルは「heap_1.c」を使用しています。目的に応じて変更してください。
* iodefine.hの不具合について  
プロジェクト生成直後はルートにRX65N用レジスタ定義ファイルが作成されます。しかし、スマートコンフィグレータを使用すると 
`/src/smc_gen/r_bsp/mcu/rx65n/register_access/iodefine.h`   
に再生成しなおされ、ルートにある方のファイルは登録が解除されます（削除はされない）。しかし、再生成された方がなぜかRX651用なので（バグ？）他のソースでインクルードすると多重インクルードエラーが出ることがあります。対策として、
    1. インクルードパスをフルパスで記述する。
    1. ルートにあるRX65N用のファイルをカットし、RX651用のファイルにペーストする。ただし、スマートコンフィグレータでコード生成するたび元に戻ってしまう。
    1. RX651の機能のみしか使わないのであれば、ルートにあるRX65Nのファイルを最初に削除するだけ。

また、`/no_used/iodefine_rx65n/iodefine.h`にRX65N用のレジスタ定義ファイルを置いてあります（最新とは限りません）。
